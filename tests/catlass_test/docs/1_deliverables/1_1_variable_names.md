# 变量名称规范

catlass常用于开发matmul类算子，这类算子具有一个最基本的核心：

$$
\mathbf{A@B=C}
$$

我们可在其基础上增加功能，例如`mmad`：
$$
\mathbf{A@B + Bias = C}
$$
或者`gemm`：

$$
\mathbf{\alpha A@B + \beta Bias = C}
$$
由此可见，各种matmul类算子具有类似的输入输出结构，所以我们可以通过规范模板代码中变量的名称，使各种适配层的代码更加通用。

下面给出建议的变量名称。这个规则可以不加遵守，但一般会导致适配层无法复用。

| 变量名称             | 数学意义                             | 模板中的类型变量名                              |
| -------------------- | ------------------------------------ | ----------------------------------------------- |
| problemShape         | 矩阵乘法的维度信息`(m,n,k)`          | *`GemmCoord`* problemShape                      |
| problemCount         | 分组/批量矩阵乘法的乘法数量          | *`uint32_t`* problemCount                       |
| $\mathbf{A}$         | 矩阵乘法的**左**矩阵                 | 见[矩阵和向量的参数名称](#矩阵和向量的参数名称) |
| $\mathbf{B}$         | 矩阵乘法的**右**矩阵                 | 见[矩阵和向量的参数名称](#矩阵和向量的参数名称) |
| $\mathbf{C}$         | 矩阵乘法的**结果**矩阵               | 见[矩阵和向量的参数名称](#矩阵和向量的参数名称) |
| $\mathbf{Bias}$      | 矩阵乘**加**的**偏置**矩阵           | 见[矩阵和向量的参数名称](#矩阵和向量的参数名称) |
| $\mathbf{GroupList}$ | **分组**矩阵乘法的分组向量           | 见[矩阵和向量的参数名称](#矩阵和向量的参数名称) |
| $\mathbf{\alpha}$    | **通用**矩阵乘法中乘法操作的缩放因子 | *`float`* alpha                                 |
| $\mathbf{\beta}$     | **通用**矩阵乘法中加法操作的缩放因子 | *`float`* beta                                  |

## 矩阵和向量的参数名称

矩阵和向量的参数较多，涉及模板参数和运行时参数。常用参数如下：

- `Element`：矩阵数据类型
- `Layout`：矩阵布局
- `device`：矩阵数据的device侧地址，类型为 *`uint8_t *`*

如欲使用这些变量，应当遵循**类型-名称**的顺序进行拼接。以矩阵$\mathbf{A}$为例：

```cpp
using ElementA = half;
using LayoutA = layout::RowMajor;
uint8_t *deviceA = nullptr;
```
